# --- CLI option tests  ---

# Invoquing with correct file as argument
$$$ stack run -- test/system/examples/Correct.hs
>>>2
>>>= 0

# Invoquing with correct file in standard input
<<<
test/system/examples/Correct.hs
$$$ stack run
>>>2
>>>= 0

# Invoquing with correct file as argument and flawed file in standard input
<<<
test/system/examples/UselessDo.hs
$$$ stack run -- test/system/examples/Correct.hs
>>>2
>>>= 0

# Invoquing with argos output
$$$ stack run -- -o argos test/system/examples/UselessDo.hs && tail -n 1 style-major.txt
>>>
test/system/examples/UselessDo.hs:4:D1
>>>2
>>>= 0

# Dumping issue manifest
$$$ stack run -- --dump-manifest
>>>
C1:nested IFs
C2:guard should be a pattern
D1:useless DO
D2:useless generator
F3:line too long
F4:function too big
T1:some function has no signature
E1:some file contains forbidden extension
P1:some file is not parsable
XX:debug

>>>2
>>>= 0

# Excluding directories with vera
$$$ stack run -- --exclude "test:src:app:.git:.stack-work" .
>>>
>>>2
>>>= 0
